<% locales = TranslationKey.available_locales %>
<%= link_to "New", new_translation_key_url %>

<%= will_paginate(@translation_keys) %>
<table>
  <thead>
    <tr>
      <td>Key</td>
      <% locales.each do |locale| %>
        <td><%= locale%></td>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @translation_keys.each do |key| %>
      <tr class="<%= cycle "even","odd"%>">
        <td><%= link_to key.key, key %></td>
        <% translations = key.translations.map{|t| [t.locale, t]} %>
        <% locales.each do |locale| %>
          <td><%= translations.assoc(locale)[1].text if translations.assoc(locale) %></td>
        <% end %>
        <td>
          <%= link_to '<b style="color:red">X</b>', key, :confirm=>"Delete key #{key.key} ?", :method=>:delete %>
          <%= link_to "Edit", key %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= will_paginate(@translation_keys) %>